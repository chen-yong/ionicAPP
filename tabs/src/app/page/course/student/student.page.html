<ion-header>
    <ion-toolbar>
        <img class="back_img" src="..\assets\img\返回.png" slot="start" (click)="goBack(courseId)">
        <ion-title>学生列表</ion-title>
        <img class="add_img" src="..\assets\img\添加.png" (click)="addStudent(courseId)" slot="end">
    </ion-toolbar>
</ion-header>

<ion-content>
    <!-- 搜索框 -->
    <ion-toolbar style="margin-top: 1rem;">
        <ion-searchbar placeholder="请输入搜索关键词" [(ngModel)]="keywords" (ionFocus)="focusInput()" (ionBlur)="blurInput()">
        </ion-searchbar>
        <ion-buttons slot="end">
            <ion-button (click)="doSearch()" color="dark">
                搜索
            </ion-button>
        </ion-buttons>
    </ion-toolbar>
    <!-- 历史记录 -->
    <div class="search_content" *ngIf="flag && historyList.length>0" padding>
        <div class="history">
            <h5 class="search_title">历史记录</h5>
            <div class="btn_Delete">
                <ion-icon name="trash" slot="end" color="danger" (click)="deleteHistory(historyList)"></ion-icon>
            </div>
            <p>
                <span *ngFor="let item of historyList;let key=index;" (press)="removeHistory(key)"
                    (tap)="goSearch(item)">
                    {{item}}
                </span>
            </p>
        </div>
    </div>
      <!-- 未搜索时在页面的右侧按顺序显示姓名存在的首字母 -->
      <div *ngIf="!isSearching">
        <div id="letter">
            <p class="indexed-item" [class.activate]="letter === index" *ngFor="let letter of letters;let i = index"
                (click)="selectIndex(letter)">{{letter}}</p>
        </div>
        <!-- 点击右侧检索时页面中间临时显示点击的字母 -->
        <div class="modal" [class.show]="showModal">
            {{index}}
        </div>
    </div>
    <!-- 搜索时显示的结果 -->
    <ion-card *ngIf="isSearching">
        <p>&nbsp;&nbsp;&nbsp;&nbsp;最佳匹配</p>
        <ion-item-group *ngFor="let contacts of searchingItems;let i = index">
            <ion-item-divider color="light" id="{{searchLetters[i]}}">
                <ion-label>{{searchLetters[i]}}</ion-label>
            </ion-item-divider>
            <ion-item *ngFor="let item of contacts">
                <section>{{item.name }}</section>
            </ion-item>
        </ion-item-group>
    </ion-card>
    <!-- 未搜索时显示的结果 -->
    <ion-card *ngIf="!isSearching">
        <ion-item-group *ngFor="let item of formatContacts;let i = index">
            <!-- 遍历字母，显示通讯录中存在名字首字母为改字母的字母 -->
            <ion-item-divider color="light" id="{{ aLetters[i] }}" *ngIf="item.length>0">
                {{aLetters[i]}}
            </ion-item-divider>
            <ion-list *ngFor="let contact of item" key="item.id">
                <ion-item-sliding>
                    <ion-item  (tap)="editStudent(contact.id)">
                        <ion-thumbnail slot="start">
                            <img [src]="contact.src">
                        </ion-thumbnail>
                        <ion-label>{{contact.name}}</ion-label>
                    </ion-item>
                    <ion-item-options side="end">
                        <ion-item-option color="medium" (click)="resetPwd(contact.id)">重置密码</ion-item-option>
                        <ion-item-option color="danger" (click)="delete(contact.id)">删除</ion-item-option>
                    </ion-item-options>
                </ion-item-sliding>
            </ion-list>
        </ion-item-group>
    </ion-card>

</ion-content>