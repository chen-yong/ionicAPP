<ion-header>
  <ion-toolbar>
    <img class="back_img" src="..\assets\img\返回.png" slot="start" (click)="goBack()">
    <ion-title>通讯录</ion-title>
    <img class="add_img" src="..\assets\img\添加.png" (click)="addlianxiren()" slot="end">
    <!-- <ion-searchbar [(ngModel)]="searchInput" placeholder="姓名/电话" (ionInput)="goSearchResult($event)" aria-autocomplete="on" showCancelButton='true' cancelButtonText="取消"></ion-searchbar> -->
  </ion-toolbar>
  <!-- 搜索框 -->
  <ion-toolbar style="margin-top: 1rem;">
    <ion-searchbar [(ngModel)]="searchInput" placeholder="请输入搜索姓名" (ionFocus)="focusInput()" (ionBlur)="blurInput()">
    </ion-searchbar>
    <ion-buttons slot="end">
      <ion-button (click)="goSearchResult()" color="dark">搜索</ion-button>
    </ion-buttons>
  </ion-toolbar>
  <!-- 历史记录 -->
  <div class="search_content" *ngIf="flag && historyList.length>0 " padding>
    <div class="history">
        <h5 class="search_title">历史记录</h5>
            <div class="btn_Delete">
                <ion-icon name="trash" slot="end" color="danger" (click)="deleteHistory(historyList)"></ion-icon>
            </div>
            <p>
            <span *ngFor="let item of historyList;let key=index;" (press)="removeHistory(key)" (tap)="goSearch(item)"> 
              {{item}}
            </span>
        </p>
    </div>
</div>
</ion-header>

<ion-content>

  <!-- 未搜索时在页面的右侧按顺序显示姓名存在的首字母 -->
  <div *ngIf="!isSearching">
    <div id="letter">
      <p class="indexed-item" [class.activate]="letter === index" *ngFor="let letter of letters;let i = index"
        (click)="selectIndex(letter)">{{letter}}</p>
    </div>
    <!-- 点击右侧检索时页面中间临时显示点击的字母 -->
    <div class="modal" [class.show]="showModal">
        {{index}}
    </div>
  </div>
  <!-- 搜索时显示的结果 -->
  <ion-list *ngIf="isSearching">
    <p>&nbsp;&nbsp;&nbsp;&nbsp;最佳匹配</p>
    <ion-item-group *ngFor="let contacts of searchingItems;let i = index">
      <ion-item-divider color="light" id="{{searchLetters[i]}}">
        <ion-label>{{searchLetters[i]}}</ion-label>
      </ion-item-divider>
      <ion-item *ngFor="let item of contacts" (tap)="sendemail(item.id)">
        <section>{{item.name }}</section>
      </ion-item>
    </ion-item-group>
  </ion-list>
  <!-- 未搜索时显示的结果 -->
  <ion-list *ngIf="!isSearching">
    <ion-item-group *ngFor="let item of formatContacts;let i = index">
      <!-- 遍历字母，显示通讯录中存在名字首字母为改字母的字母 -->
      <ion-item-divider color="light" id="{{ aLetters[i] }}" *ngIf="item.length>0">
        {{aLetters[i]}}
      </ion-item-divider>
      <ion-item *ngFor="let contact of item" (tap)="sendemail(contact.id)">
        <section>{{contact.name }}</section>
      </ion-item>
    </ion-item-group>
  </ion-list>

</ion-content>